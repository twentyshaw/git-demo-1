<!DOCTYPE html>
<html>
    <head>
        <script src="//at.alicdn.com/t/font_1091700_ve4nx3kj2t.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/17.3.0/Tween.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.5.0/js/swiper.min.js"></script>
        <script src="//cdn.jsdelivr.net/npm/leancloud-storage@3.13.2/dist/av-min.js"></script>
        <style type="text/css">
            .icon {
               width: 1em; height: 1em;
               vertical-align: -0.15em;
               fill: currentColor;
               overflow: hidden;
            }
        </style>
        <link rel="stylesheet" href="./css/resume.css">
        <link rel="stylesheet" href="./css/loading.css">
        <link href="https://fonts.googleapis.com/css?family=Fredoka+One" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.5.0/css/swiper.min.css">
    </head>
    <body>
        <div id="siteWelcome" class="site_welcome active">
            <div class="loading"></div>
        </div>
        <header>
            <div id="topNav" class="topNavBar">
                <div class="topNavBar_inner clearfix">
                    <a class="logo" href="#"><span class="rs">RS</span>card</a>
                    <nav>
                        <ul class="navigation">
                            <li><a href="#profile">关于</a></li>
                            <li><a href="#skill">技能</a></li>
                            <li class="sub_hold">
                                <a href="#myPortfolio">作品</a>
                                <ul class="sub_menu">
                                    <li>作品1</li>
                                    <li>作品2</li>
                                    <li>作品3</li>
                                </ul>
                            </li>
                            <li class="sub_hold">
                                <a href="#">博客</a>
                                <ul class="sub_menu">
                                    <li>博客1</li>
                                    <li>博客2</li>
                                    <li>博客3</li>
                                </ul>
                            </li>
                            <li><a href="#">日历</a></li>
                            <li><a href="#">联系方式</a></li>
                            <li><a href="#messagebox">留言板</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
            <div class="head_bg"></div>
        </header>
        <div class="contents_main">
            <main>
                <div data-x class="user" id="profile">
                    <div class="user_inner">
                        <div class="usercard clearfix">
                            <div class="photo"><img src="./img/live-long-and-prosper-225.png" width="299" alt="photo of mine"></div>
                            <div class="id_text">
                                <span>Hello</span>
                                <h1>JIANG XIAO</h1>
                                <p>见习前端工程师</p>
                                <hr>
                                <dl class="clearfix">
                                    <dt>年龄</dt>
                                    <dd>23</dd>
                                    <dt>所在城市</dt>
                                    <dd>日本</dd>
                                    <dt>邮箱</dt>
                                    <dd>12345@gmail.com</dd>
                                    <dt>手机</dt>
                                    <dd>1234567</dd>
                                </dl>
                            </div>
                        </div>
                        <footer>
                            <div class="contact">
                                <a href="#">
                                    <svg class="icon" aria-hidden="true">
                                        <use xlink:href="#icon-github"></use>
                                    </svg>
                                </a>
                                <a href="#">
                                    <svg class="icon" aria-hidden="true">
                                        <use xlink:href="#icon-weibo"></use>
                                    </svg>
                                </a>
                                <a href="#">
                                    <svg class="icon" aria-hidden="true">
                                        <use xlink:href="#icon-twitter"></use>
                                    </svg>
                                </a>
                            </div>
                        </footer>
                    </div>
                </div>
                <p class="text_download">
                    <a href="#" download="">DOWNLOAD RESUME</a>
                </p>
                <p class="intro">毕业于山东大学。现在日留学。网页设计实习中。</p>
            </main>
            <div class="sub_contents">
                <div data-x class="skills" id="skill">
                    <h2 class="sub_ttl">技能</h2>
                    <ul class="clearfix">
                        <li>HTML & CSS<span class="bar"></span></li>
                        <li>JavaScript<span class="bar"></span></li>
                        <li>WordPress<span class="bar"></span></li>
                        <li>Photoshop<span class="bar"></span></li>
                        <li>jQuery<span class="bar"></span></li>
                        <li>Vue<span class="bar"></span></li>
                    </ul>
                </div>
                <div data-x class="portfolio" id="myPortfolio">
                    <h2 class="sub_ttl">作品集</h2>
                    <ul>
                        <li id="portall">所有</li>
                        <li id="portframe">框架</li>
                        <li id="portvallina">原生JS&CSS</li>
                        <div id="portbar" class="select_bar state_1"></div>
                    </ul>
                
                    <script>
                        portall.onclick=function(){
                            portbar.className="select_bar state_1"
                        }
                        portframe.onclick=function(){
                            portbar.className="select_bar state_2"
                        }
                        portvallina.onclick=function(){
                            portbar.className="select_bar state_3"
                        }
                    </script>
                    <!--轮播-->
                    <style type="text/css">
                        .swiper-container {
                            width: 600px;
                            height: 300px;
                            margin-top: 30px;
                        }
                        .swiper-slide{
                            text-align: center;
                        }
                    </style>
                    <div class="swiper-container">
                        <!-- Additional required wrapper -->
                        <div class="swiper-wrapper">
                            <!-- Slides -->
                            <div class="swiper-slide"><img src="./img/nav.jpg" width="500"></div>
                            <div class="swiper-slide"><img src="./img/canvas.jpg" width="500"></div>
                            <div class="swiper-slide"><img src="./img/slideshow.jpg" width="500"></div>
                        </div>
                        <!-- If we need navigation buttons -->
                        <div class="swiper-button-prev"></div>
                        <div class="swiper-button-next"></div>

                    </div>
                    <script>
                      var mySwiper = new Swiper ('.swiper-container', {
                        // Optional parameters
                        loop: true,

                        // Navigation arrows
                        navigation: {
                          nextEl: '.swiper-button-next',
                          prevEl: '.swiper-button-prev',
                        },
                      })
                    </script>
                </div>
                <div id="messagebox">
                    <h2 class="sub_ttl">留言</h2>
                    <h3>All Comments</h3>
                    <ul id="commentList"> 
                    </ul>
                    <form id="postMessageForm">
                        <label>用户名：</label>
                        <input type="text" name="username">
                        <label>评论：</label>
                        <input type="text" name="content">
                        <input type="submit" value="提交">
                    </form>
                </div>
            </div>
        </div>
        <script type="text/javascript">
            var cancel_a = function(){siteWelcome.classList.remove("active")}
            setTimeout(cancel_a, 2000)
            let specialTags = document.querySelectorAll("[data-x]")
            for (var i = 0; i < specialTags.length; i++) {
                specialTags[i].classList.add("lower")
            }
            setTimeout(scroll, 2000)
            window.onscroll = function(){
                if(window.scrollY > 0){
                    topNav.classList.add("sticky")
                }else{
                    topNav.classList.remove("sticky")
                }
                scroll()
            }
            function scroll(){
                let specialTags = document.querySelectorAll("[data-x]")
                let minIndex = 0
                for (var i = 0; i < specialTags.length; i++) {
                    if (Math.abs(specialTags[i].offsetTop - window.scrollY) < Math.abs(specialTags[minIndex].offsetTop - window.scrollY)) {minIndex = i}
                }
                specialTags[minIndex].classList.remove("lower")
                let id = specialTags[minIndex].id
                let a = document.querySelector('a[href="#' + id + '" ]')
                let li = a.parentNode
                let brothers = li.parentNode.children
                for (var i = 0; i < brothers.length; i++) {
                    brothers[i].classList.remove("highlight")
                }
                li.classList.add("highlight")
            } 
            let liTags = document.getElementsByClassName("sub_hold")
            for (var i = 0; i < liTags.length; i++) {
                liTags[i].onmouseenter =function(x){
                    let list = x.currentTarget
                    list.classList.add("active")
                }
                liTags[i].onmouseleave =function(x){
                    let list = x.currentTarget
                    list.classList.remove("active")
                }
            }
            
            function animate(time) {
                requestAnimationFrame(animate);
                TWEEN.update(time);
            }
            requestAnimationFrame(animate);
            let aTags = document.querySelectorAll("nav > ul.navigation > li > a")
            for (var i = 0; i < aTags.length; i++) {
                aTags[i].onclick = function(x){
                    x.preventDefault()
                    let a = x.currentTarget
                    let href = a.getAttribute("href")
                    let element = document.querySelector(href)
                    let top = element.offsetTop
                    let currentTop = window.scrollY
                    let targetTop = top - 100
                    var coords = {y: currentTop}; // Start at (0, 0)
                    var tween = new TWEEN.Tween(coords) // Create a new tween that modifies 'coords'.
                            .to({y: targetTop}, 500) // Move to (300, 200) in 1 second.
                            .easing(TWEEN.Easing.Quadratic.In) // Use an easing function to make the animation smooth.
                            .onUpdate(function() { // Called after tween.js updates 'coords'.
                                // Move 'box' to the position described by 'coords' with a CSS translation.
                                window.scrollTo(0,coords.y);//当onUpdate里面的函数被调用时，coords.y已经不是原来的值了，它会被函数更新
                            })
                    .start();
                }
            }
            
        </script>
        <script type="text/javascript" src="message.js"></script>
    </body>
</html>